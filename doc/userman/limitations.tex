\chapter{Known Limitations}

The development of the \fclang plug-in is still ongoing.
\fclang does not implement all of current C++ nor all of 
\acslpp as defined in its language definition~\cite{acslpp}.
The most important such limitations are listed in this section.

\textit{These lists are not (nearly) complete}

\section{Implementation of C++}

The following C++ features are not implemented in \acslpp.
\begin{itemize}
\item preprocessing is restricted within \acslpp annotations (cf. \S\ref{sec:preprocessing})
\item uses of typename
\item uses of templates are not robust
\item uses of typeid
\end{itemize}

\section{Implementation of \acslpp}

These \acslpp features are not yet implemented
\begin{itemize}

\item \fclang cannot process annotations that are separate from the source file
\item \acslpp specifications for standard \cpp library functions are still quite limited
\item \acslpp definitions within template declarations
\item ghost code is not yet implemented
\item model declarations
\item set comprehensions
\item using (namespace) declarations (parsed but has no effect)
\item pure functions (parsed but incompletely implemented)
\item throws clause (parsed but not implemented in \framac)
\item interaction of throws and noexcept
\item parallel \textbackslash let
\item \textbackslash count and \textbackslash data are parsed but not yet implemented in \framac
\item formal parameters that are references have pre and post states
\item dynamic casting not yet implemented in \framac
\item rounding mode  and related builtin functions
\item builtin types list and \textbackslash set and related builtin functions
\item \textbackslash valid\_function \textbackslash allocable \textbackslash freeable \textbackslash fresh are not yet implemented by \framac
\item extended quantifiers are not yet implemented by \framac
\item global invariants are not yet implemented by \framac
\item generalized invariants are not yet implemented by \framac
\item assigns with both \textbackslash from and = is not yet implemented
\end{itemize}

\section{Other \fcl limitations}

\begin{itemize}
\item \option{-fclang-version} is not implemented
\item parsing routines need work to improve robustness, to improve accuracy of locations, and to guard against leaking memory when parses fail
\item the term/predicate parsing methods should be refactored to avoid deep call stacks
\item resolve issues of tset representations
\item cannot change the set of C++ suffixes
\item frama-clang info/warn/error messages are not yet properly categorized and integrated with -fclang-log, -fclang-msg-key, fclang-warn-key. In particular, clang messages are completely independent of the \framac logging framework
\end{itemize}

%% Types for ternary, +/-, * etc. , unary & and *
%% AST for range
%% location types and AST
%% place of ext quantifiers in parsing -- should be a kind of primary I think?
%% method call disambiguation
%% use of isMethod
%% Refactor  backtracking to reuse clang tokens instead of ACSL tokens


